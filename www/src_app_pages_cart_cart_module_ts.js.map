{"version":3,"file":"src_app_pages_cart_cart_module_ts.js","mappings":"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","sources":["./src/app/pages/cart/cart-routing.module.ts","./src/app/pages/cart/cart.module.ts","./src/app/pages/cart/cart.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CartPage } from './cart.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CartPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CartPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartPageRoutingModule } from './cart-routing.module';\n\nimport { CartPage } from './cart.page';\nimport { HttpClient } from \"@angular/common/http\";\nimport { TranslateHttpLoader } from \"@ngx-translate/http-loader\";\nimport { TranslateLoader, TranslateModule } from \"@ngx-translate/core\";\nimport {ShareComponentModule} from '../../components/share-component-module';\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, \"./assets/i18n/\", \".json\");\n}\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ShareComponentModule,\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient],\n      },\n    }),\n    CartPageRoutingModule\n  ],\n  declarations: [CartPage],\n  providers:[DatePipe]\n})\nexport class CartPageModule {}\n","import { DatePipe } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { session } from 'src/app/utility/message';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.page.html',\n  styleUrls: ['./cart.page.scss'],\n})\nexport class CartPage implements OnInit {\n  booking:any=null;\n  plan:any=null;\n  vat:any=null;\n  products_data:Array<any>=[];\n  termsConditionStatus:boolean=false;\n  privacyPolicyStatus:boolean=false;\n  paymentUrl: any;\n  ionModelOpen = false\n  paymentId: any;\n  selectedPlan:any;\n  constructor(\n    private utility: UtilService,\n    private apiService: ApiService,\n    private router: Router, \n    private navController: NavController,\n    private domSanit: DomSanitizer,\n    public datepipe: DatePipe\n  ) { \n   // this.getPlanDetail();\n  }\n\n  ngOnInit() {\n   \n   // this.getPlanDetail();\n  }\n  \n  ionViewWillEnter(){\n    this.getPlanDetail();\n  }\n\n  async getPlanDetail() {\n    this.selectedPlan = await this.utility.getStorage(session.SELECTED_PLAN); \n    console.log(this.selectedPlan)\n    let loading = await this.utility.presentLoading();\n    let booking:any=await this.utility.getStorage(session.BOOKING);\n    this.booking=booking ? JSON.parse(booking) : null;\n    let response: any = await this.apiService.getPlanDetail(this.selectedPlan);\n    loading.dismiss();\n    if(response.status == 1){\n      this.plan=response.data ? response.data :null;\n      if(this.plan){\n        this.products_data=this.plan.products_data ? this.plan.products_data : [];\n        this.vat=this.plan.vat ? this.plan.vat : null;\n      }\n    }\n  }\n\n  async buyCart(){\n    // this.openQuestion();\n\n    // if(!this.termsConditionStatus){\n    //   this.utility.presentToast('Select terms & condition');\n    //   return false;\n    // }else if(!this.privacyPolicyStatus){\n    //   this.utility.presentToast('Select privacy policy');\n    //   return false;\n    // }else\n     if(!this.booking){\n      this.utility.presentToast('Booking detail not found',\"bottom\");\n      return false;\n    }else{\n      let latest_date:string='';\n      if(this.booking.dob){\n        let dob=new Date(this.booking.dob);\n        latest_date =this.datepipe.transform(dob, 'dd-MM-yyyy');\n      }\n      let params={\n        selected_plan :this.selectedPlan ? this.selectedPlan : 'body analysis',\n        email :this.booking.email ? this.booking.email : '',\n        countryId :this.booking.countryId ? Number(this.booking.countryId) : 0,\n        nr :this.booking.nr ? this.booking.nr : '',\n        streetname  :this.booking.streetname  ? this.booking.streetname  : '',\n        city  :this.booking.city  ? this.booking.city  : '',\n        zipCode  :this.booking.zipCode ? Number(this.booking.zipCode)  : '',\n        dob  :latest_date,\n      };\n      let result:any=await this.apiService.createPayment(params);\n      if(result.status == 0){\n        this.utility.presentToast(result.msg,\"bottom\");\n        return false;\n      }else{\n        this.paymentUrl = result.response.result.redirect_url;\n        this.paymentId = result.paymentId;\n        if(this.paymentUrl) {\n          this.paymentUrl = this.domSanit.bypassSecurityTrustResourceUrl( this.paymentUrl)\n        }\n        this.validatePayment();\n        this.ionModelOpen = true;\n      }\n    }\n  }\n\n  async validatePayment() {\n     let result:any=await this.apiService.paymentStatus({\n       paymentId: this.paymentId\n     });\n     if(result.status == 0) {\n      setTimeout(() => {\n        this.validatePayment();\n      }, 2000);\n     } else{\n        this.ionModelOpen = false;\n        this.booking.paymentId = this.paymentId;\n        let data:any=await this.apiService.proceedRegistration(this.booking);\n        if(data.status == 1){\n          this.utility.presentToast(result.msg,\"bottom\");\n          this.resetCart();\n          this.openQuestion();\n        }else{\n          this.utility.presentToast(result.msg,\"bottom\");\n          return false;\n        }\n     }   \n  }\n\n  openQuestion(){\n    \n    this.router.navigate([\"/questionare\"]);\n  }\n\n  resetCart(){\n    this.plan=null;\n    this.booking=null;\n    this.vat=null;\n    this.products_data=[];\n    this.paymentId=null;\n    this.paymentUrl=null;\n    this.utility.removeStorage(session.BOOKING);\n  }\n\n  // goBack(){\n  //   this.navController.back();\n  // }\n}\n"],"names":[],"sourceRoot":"webpack:///"}